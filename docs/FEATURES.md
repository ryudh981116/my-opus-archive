# 구현된 기능 (Features)

## 1. 사용자 인증 (Authentication)

### 회원가입 (Sign Up)
- 사용자명, 이메일, 비밀번호 입력
- 비밀번호 확인 검증
- 중복 사용자명 체크
- 메인 콘텐츠 상단의 탭 기반 UI

### 로그인 (Login)
- 사용자명 + 비밀번호 인증
- 세션 상태 유지
- 로그인 성공 시 앱 페이지 접근 가능

### 로그아웃 (Logout)
- 사이드바의 로그아웃 버튼
- 세션 초기화

**관련 주요 함수:**
- `register_user()` - 새 사용자 등록
- `login_user()` - 사용자 인증
- 데이터 저장소: `data/users.json`

---

## 2. 공연 기록 관리 (Performance Management)

### 새 연주 기록 추가
- **페이지**: 사이드바 → "✏️ 새 연주 기록"
- **입력 필드**:
  - 📅 연주회 날짜
  - 📍 연주 장소 (드롭다운)
  - 🎻 악기 (드롭다운)
  - 🎼 세부 파트 (드롭다운)
  - 🎩 지휘자
  - 🎼 단체명
  - 📋 곡목 (1부/2부/앵콘 선택)
  - 💰 객원 출연 여부 및 페이
  - 🌍 공개/비공개 설정
  - 🎬 유튜브 영상 URL (선택)
  - 📸 포스터 이미지 URL (선택)

### 내 연주 내역 조회
- **페이지**: 사이드바 → "📚 내 연주 내역"
- **표시 정보**:
  - 연주 장소, 날짜, 악기, 파트
  - 단체명, 지휘자
  - 곡목 (최대 3개)
  - 유튜브 링크
  - 공개/비공개 표시
- **액션**:
  - ✏️ 수정 (아직 미구현)
  - 🗑️ 삭제

**관련 주요 함수:**
- `add_performance()` - 공연 기록 추가
- `get_user_performances()` - 사용자의 공연 기록 조회
- `delete_performance()` - 공연 기록 삭제
- 데이터 저장소: `data/performances.json`

---

## 3. 공개 아카이브 (Public Archive)

### 공개 공연 목록 조회
- **페이지**: 사이드바 → "🌍 공개 아카이브"
- **표시 정보**:
  - 공연자 (👤), 장소, 날짜
  - 악기, 단체명, 지휘자
  - 곡목 (최대 3개)
  - 유튜브 링크

### 좋아요 기능
- 하트 아이콘 (❤️ 또는 🤍) 클릭
- 좋아요 수 표시
- 사용자별 좋아요 상태 저장

### 댓글 시스템
- **댓글 읽기**:
  - 각 댓글을 카드 형태로 표시 (border=True)
  - 사용자명 + 댓글 내용
  - 소유자만 삭제 가능
  
- **댓글 작성**:
  - 텍스트 입력 필드
  - "작성" 버튼
  - 성공 메시지 표시
  - **입력값 자동 초기화** (미완성 - TODO)

**관련 주요 함수:**
- `get_public_performances()` - 공개 공연 조회
- `toggle_like()` - 좋아요 토글
- `get_like_count()` - 좋아요 수 조회
- `is_liked_by_user()` - 사용자의 좋아요 여부 확인
- `add_comment()` - 댓글 추가
- `get_comments()` - 댓글 조회
- `delete_comment()` - 댓글 삭제
- 데이터 저장소: `data/likes.json`, `data/comments.json`

---

## 4. 검색 및 필터링 (Search & Filter)

### 필터 옵션
- 📍 장소 (텍스트)
- 🎻 악기 (텍스트)
- 🎩 지휘자 (텍스트)
- 🎼 단체명 (텍스트)
- 📅 시작 날짜
- 📅 종료 날짜

### 검색 범위
- "내 연주 내역만" - 로그인 사용자의 공연만
- "공개 아카이브" - 전체 공개 공연

### 검색 결과
- 조건에 맞는 공연 목록 표시
- 각 공연 정보 카드 표시

**관련 주요 함수:**
- `filter_performances()` - 조건 기반 필터링

---

## 5. 설정 관리 (Settings)

### 카테고리 관리 페이지
- **페이지**: 사이드바 → "⚙️ 설정 관리"
- **기능**: 3개 카테고리를 Expander로 분류

#### 📍 장소 관리 (Venues)
- **기본값**: 예술의전당, 세종문화회관, LG아트센터, 강남심포니홀
- **추가 기능**: 텍스트 입력 + "➕ 추가" 버튼
- **삭제 기능**: 각 항목 옆 "🗑️" 버튼
- **자동 초기화**: 추가 성공 후 입력값 자동 초기화

#### 🎻 악기 관리 (Instruments)
- **기본값**: 바이올린, 비올라, 첼로, 콘트라베이스, 플루트, 클라리넷, 오보에
- **추가/삭제 기능** 동일

#### 🎼 세부 파트 관리 (Sub-parts)
- **기본값**: 1st Violin, 2nd Violin, Viola, Cello, Bass, Solo
- **추가/삭제 기능** 동일

### 의존성
- "새 연주 기록" 페이지의 드롭다운에 자동 반영
- 카테고리 변경 시 즉시 적용

**관련 주요 함수:**
- `load_categories()` - 카테고리 로드
- `save_categories()` - 카테고리 저장
- `add_category()` - 카테고리 항목 추가
- `remove_category()` - 카테고리 항목 삭제
- 데이터 저장소: `data/categories.json`

---

## 6. UI/UX 개선사항

### 페이지 네비게이션 (Navigation)
- **위치**: 사이드바 (로그인 후)
- **스타일**: 5개 버튼 (주요 색상 구분)
  - 📚 내 연주 내역
  - ✏️ 새 연주 기록
  - 🌍 공개 아카이브
  - 🔍 검색/필터
  - ⚙️ 설정 관리
- **상태 표시**: primary/secondary 버튼 색상
- **클릭 시 동작**: `st.rerun()` 호출로 페이지 전환

### 인증 UI (Authentication UI)
- **위치**: 메인 콘텐츠 상단 (로그인 전)
- **스타일**: 탭 (🔐 로그인 / ✍️ 회원가입)
- **배치**: 제목 → 로그인 탭 → 기능 설명
- **레이아웃**: 넓이 최적화 (`use_container_width=True`)

### 댓글 UI 개선 (Comment Display)
- **카드 스타일**: `st.container(border=True)` 사용
- **사용자명**: 👤 아이콘 + 굵은 텍스트
- **댓글 내용**: 카드 내부에 표시
- **삭제 버튼**: 소유자만 표시

### 기타 개선사항
- 사이드바에 중복된 로그인 폼 제거
- 메인 콘텐츠에 집중 가능한 레이아웃
- 직관적인 아이콘 사용

---

## 7. 데이터 유효성 검사 (Validation)

### 입력 필드 검증
- ✓ 필수 필드 확인
- ✓ 이메일 형식 검증 (선택사항)
- ✓ 비밀번호 일치 확인
- ✓ 중복 사용자명 체크

### 에러 처리
- 사용자 친화적 에러 메시지
- 성공 메시지 표시
- 경고 메시지 안내

---

## 미완성 기능 (TODO)

### 우선순위 1 (높음)
- [ ] 댓글 입력값 완전 초기화 (진행 중)
- [ ] 댓글 가시성 향상
- [ ] 공연 기록 수정 기능

### 우선순위 2 (중간)
- [ ] 비밀번호 해싱 (보안)
- [ ] CSV/PDF 내보내기
- [ ] 고급 검색 필터

### 우선순위 3 (낮음)
- [ ] 사용자 프로필 페이지
- [ ] 팔로우 시스템
- [ ] 알림 기능
- [ ] 다크 모드

---

## 기술 상세

### Session State 관리
```python
st.session_state.logged_in
st.session_state.current_user
st.session_state.current_page
```

### 파일 기반 데이터베이스
- JSON 형식 저장
- `pathlib.Path` 사용
- 자동 디렉토리 생성

### 스트리밍 특성
- 매 입력마다 스크립트 재실행
- `st.rerun()` 호출로 강제 재실행
- 세션 상태를 통한 상태 유지

---

**마지막 업데이트**: 2024년 2월 13일
